import{T as V,w as A}from"./runtime-dom.esm-bundler.03bfd58d.js";import{R as U}from"./Range.072757bf.js";import{l as g,I as K,s as D,d as p}from"./Input.6ad3a006.js";import{B as L}from"./Button.d968a06d.js";import{S as P}from"./Success.209e58cc.js";import{_ as R}from"./Icon.6471b241.js";import{r as C,a as d,k as M,f as m,o as S,c as f,b as t,e as i,w as r,h as c,t as B,i as x,m as q,j as E}from"./runtime-core.esm-bundler.6b7ed402.js";/* empty css                       */const O={__name:"CalculateLoan",setup(N,{expose:o}){o();const a=C({amount:3e5,term:60,payment:null}),e=d(null),u=d(2),_=d(1),s=d(null),v=d(null),y=d(""),h=d(!1),T=M(l=>{let n=a.term;if(n<12)return Number(n)+" мес.";if(n==12)return Number(Math.round(n/12*10)/10)+" год";if(n>12&&n<60)return Number(Math.round(n/12*10)/10)+" года";if(n>=60)return Number(Math.round(n/12*10)/10)+" лет"}),b=l=>{if(e.value=l.keyCode,e.value===38||e.value===40){const n=l.target.value,I=l.keyCode===38?Math.ceil(n/1e3)*1e3:Math.floor(n/1e3)*1e3;l.target.value=I}},k=(l,n)=>{l>=1e7?(a.amount=1e7,a.amount=Number(a.amount.toString().slice(0,8))):l<3e4&&(a.amount=3e4)};m(a,()=>{a.amount&&(y.value=p(a.amount)+" ₽"),m(()=>a.amount,k),m(()=>a.amount,b),m(()=>a.name,l=>{a.name=l.replace(/\d+/g,"").toString()}),v.value=p(s.value),s.value=Math.ceil(g(a.term,a.amount,u.value)),a.payment=p(Math.ceil(s.value-s.value*.01)),console.log(a)});const j=async()=>{h.value=await D(a),setTimeout(()=>{h.value=!1},5e3),_.value=1,Object.keys(a).forEach(l=>{delete a[l]}),a.amount=3e5,a.term=60,a.payment=null};S(()=>{s.value=Math.ceil(g(a.term,a.amount,u.value)),a.payment=Math.ceil(s.value-s.value*.01)});const w={formData:a,keyCode:e,percent:u,step:_,presentLoan:s,present:v,mask:y,sended:h,suffix:T,handleKeydown:b,handleAmountChange:k,send:j,ref:d,reactive:C,watch:m,onMounted:S,computed:M,Range:U,Input:K,Button:L,Success:P,get sendToApi(){return D},get delimiter(){return p},get loanPayment(){return g}};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}},z={id:"calculate",class:"indent"},F={class:"px-3 grid md:px-9 lg:px-[52px] xl:px-20 sm:container mx-auto"},G=t("p",{class:"heading"},"Калькулятор платежей",-1),H=["onSubmit"],J={key:0,class:"grid gap-4 md:grid-cols-2 md:gap-5 lg:gap-13 items-center"},Q={class:"grid gap-4 md:gap-9"},W={class:"grid gap-2"},X=t("ul",{class:"flex font-medium justify-between px-4"},[t("li",{class:"text-mine-shaft/40 text-xs"},"30 000 ₽"),t("li",{class:"text-mine-shaft/40 text-xs"},"10 000 000 ₽")],-1),Y=t("ul",{class:"flex font-medium justify-between mt-2 px-4"},[t("li",{class:"text-mine-shaft/40 text-xs"},"6 мес"),t("li",{class:"text-mine-shaft/40 text-xs"},"5 лет")],-1),Z={class:"px-4 py-5 bg-buckthorn rounded-4xl"},$={class:"grid gap-1"},ee=t("span",{class:"text-white text-lg"},"Ежемесячный платеж",-1),te={class:"text-white/50 font-bold relative w-max"},ae={class:"text-lg leading-6"},se=t("span",{class:"text-t-2xl leading-7"},"/мес",-1),oe=t("span",{class:"w-full absolute block top-1/2 translate-y-0.5 bg-white h-0.5 rounded-sm"},null,-1),ne={class:"mt-3 text-white"},le=t("div",{class:"flex space-x-1.5 items-center"},[t("span",{class:"font-medium"},"При оформлении сегодня"),t("span",{class:"block bg-white px-2 rounded-full text-mine-shaft font-extrabold"},"-1%")],-1),ie={class:"font-extrabold text-[36px] leading-[110%]"},de=t("span",{class:"opacity-50 text-t-2xl"},"/мес",-1),me={key:1,class:"grid gap-4 bg-white md:grid-cols-2 md:gap-5 px-3 py-6 md:py-8 md:px-6 lg:px-10 xl:px-28 rounded-4xl lg:gap-x-12 items-center"},re=t("p",{class:"font-bold text-mine-shaft 2xs:tracking-t-2 2xs:font-extrabold 2xs:text-t-3xl md:text-t-4xl md:col-span-2 text-t-2.5xl text-center"},"Введите данные",-1),ce={class:"grid gap-y-4"},ue={class:"grid gap-y-4"},pe=t("span",{class:"text-t-xs md:col-span-2 text-center text-mine-shaft/40"},"Нажимая на кнопку «Далее», я соглашаюсь на обработку персональных данных и согласен с политикой конфиденциальности и лицензией",-1);function fe(N,o,a,e,u,_){return c(),f("section",z,[t("div",F,[G,i(V,{"enter-active-class":"animate-opacity-enter-active","leave-active-class":"animate-opacity-leave-active",mode:"out-in"},{default:r(()=>[e.sended?(c(),E(e.Success,{key:1,class:"max-w-[440px] mx-auto my-14"})):(c(),f("form",{key:0,onSubmit:A(e.send,["prevent"]),class:"mt-5"},[i(V,{"enter-active-class":"animate-opacity-enter-active","leave-active-class":"animate-opacity-leave-active",mode:"out-in"},{default:r(()=>[e.step===1?(c(),f("div",J,[t("fieldset",Q,[t("fieldset",W,[i(e.Input,{name:"sum",id:"sum",type:"number",mask:e.mask,onKeydown:e.handleKeydown,placeholder:"Сумма займа",modelValue:e.formData.amount,"onUpdate:modelValue":o[0]||(o[0]=s=>e.formData.amount=s)},null,8,["mask","modelValue"]),X]),t("fieldset",null,[i(e.Range,{name:"term",title:"Срок займа",placeholder:e.suffix,modelValue:e.formData.term,"onUpdate:modelValue":o[1]||(o[1]=s=>e.formData.term=s),min:6,max:60,step:6},null,8,["placeholder","modelValue"]),Y])]),t("fieldset",Z,[t("div",$,[ee,t("div",te,[t("span",ae,B(e.present)+" ₽",1),se,oe]),t("div",ne,[le,t("span",ie,[x(B(e.formData.payment)+" ₽",1),de])])]),i(e.Button,{white:"",class:"mt-6",onClick:o[2]||(o[2]=s=>e.step=2)},{default:r(()=>[x(" Рассчитать ")]),_:1})])])):e.step===2?(c(),f("div",me,[re,t("fieldset",ce,[i(e.Input,{placeholder:"Имя",modelValue:e.formData.name,"onUpdate:modelValue":o[3]||(o[3]=s=>e.formData.name=s),required:""},null,8,["modelValue"]),i(e.Input,{type:"tel",placeholder:"Номер телефона",modelValue:e.formData.phone,"onUpdate:modelValue":o[4]||(o[4]=s=>e.formData.phone=s),required:""},null,8,["modelValue"])]),t("fieldset",ue,[i(e.Button,{type:"submit",disabled:!e.formData.name||!e.formData.phone,onClick:o[5]||(o[5]=s=>e.step=3)},{default:r(()=>[x("Оставить заявку")]),_:1},8,["disabled"]),i(e.Button,{light:"",onClick:o[6]||(o[6]=s=>e.step=1)},{default:r(()=>[x("Назад")]),_:1})]),pe])):q("",!0)]),_:1})],40,H))]),_:1})])])}const we=R(O,[["render",fe]]);export{we as default};
