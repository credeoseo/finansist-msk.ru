import{T as M,w as X}from"./runtime-dom.esm-bundler.03bfd58d.js";import{g as C,s as K,d as R,I as Y}from"./Input.6ad3a006.js";import{R as Z}from"./Range.072757bf.js";import{_ as H,I as $}from"./Icon.6471b241.js";/* empty css                       */import{a as i,k as V,h as d,c,b as n,n as k,t as y,e as r,w as p,F as ee,d as te,m as w,i as u,p as ae,q as oe,r as L,f as b,o as G,j as ne}from"./runtime-core.esm-bundler.6b7ed402.js";import{B as le}from"./Button.d968a06d.js";import{S as se}from"./Success.209e58cc.js";const re={__name:"Select",props:{id:{type:String,default:()=>""},name:{type:String,default:()=>""},required:{type:Boolean,default:()=>!1},disabled:{type:Boolean,default:()=>!1},placeholder:{type:String,default:()=>""},modelValue:{type:[String,Number],default:()=>""},options:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(x,{expose:o,emit:t}){o();const e=x,g=i(!1),_=V({get(){return e.modelValue},set(h){t("update:modelValue",h)}}),a={open:g,emit:t,props:e,model:_,computed:V,ref:i,Icon:$};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},ie=x=>(ae("data-v-86f1d4ac"),x=x(),oe(),x),de={class:"relative"},me=["disabled"],ce={key:0,class:"absolute z-10 inset-x-0 ring-1 ring-mine-shaft/40 bg-white rounded-b-2.5xl top-full p-4"},ue={class:"select overflow-y-scroll pr-2 max-h-[160px]"},fe=["value"],pe=["onClick"],xe=ie(()=>n("span",{class:"absolute top-0 left-0 text-red-600 transition-opacity error empty:opacity-0 peer"},null,-1)),ge={class:"transition-opacity opacity-0 peer-empty:opacity-100"},_e={key:0,class:"text-red-600"};function he(x,o,t,e,g,_){return d(),c("div",de,[n("div",{class:k(["relative h-[68px] transition-all ring-mine-shaft/40 ring-1 rounded-2.5xl px-4 pt-7 pb-3",[e.open?"rounded-b-none":"",t.disabled?"opacity-50":""]])},[n("button",{onClick:o[0]||(o[0]=a=>e.open=!e.open),disabled:t.disabled,type:"button",class:k([e.open?"after:fixed after:inset-0":"","before:absolute before:inset-0 focus:outline-none outline-none text-mine-shaft h-full text-left w-full"])},y(e.model),11,me),r(e.Icon,{name:"arrow",size:"w-6 h-6",class:k(["text-mine-shaft absolute pointer-events-none right-4 transition-all duration-500 top-1/2 -translate-y-1/2",e.open?"rotate-180":""])},null,8,["class"]),r(M,{"enter-active-class":"animate-opacity-enter-active","leave-active-class":"animate-opacity-leave-active"},{default:p(()=>[e.open?(d(),c("div",ce,[n("ul",ue,[(d(!0),c(ee,null,te(t.options,a=>(d(),c("li",{key:a.id||a,value:a.name||a},[n("button",{type:"button",class:"w-full text-left text-mine-shaft/40 hover:text-mine-shaft-1 transition-all",onClick:h=>(e.model=a.name||a,e.open=!e.open)},y(a.name||a),9,pe)],8,fe))),128))])])):w("",!0)]),_:1})],2),t.placeholder?(d(),c("span",{key:0,class:k([e.model?"text-sm top-2":"text-base top-[34px] -translate-y-1/2","absolute font-medium transition-all pointer-events-none peer-focus-visible:text-mine-shaft/60 text-mine-shaft/40 peer-focus:top-2 peer-focus:text-sm peer-focus:translate-y-0 inset-x-4 login-reg__placeholder"])},[xe,n("span",ge,[u(y(t.placeholder)+" ",1),t.required?(d(),c("span",_e,"*")):w("",!0)])],2)):w("",!0)])}const be=H(re,[["render",he],["__scopeId","data-v-86f1d4ac"]]),ye={__name:"MoneyForm",setup(x,{expose:o}){o();const t=L({amount:3e5,term:60,payment:null}),e=l=>{const m=String(t.year);if(m.length>4){const f=m.substring(0,4);t.year=Number(f)}},g=i(1),_=i(2),a=i([]),h=i([]),B=i(""),v=i(null),N=(l,s,m)=>{const f=m/100/12;return s*(f*Math.pow(1+f,l))/(Math.pow(1+f,l)-1)},J=V(l=>{let s=t.term;if(s<12)return s+" мес.";if(s==12)return Math.round(s/12*10)/10+" год";if(s>12&&s<60)return Math.round(s/12*10)/10+" года";if(s>=60)return Math.round(s/12*10)/10+" лет"}),F=l=>{if(v.value=l.keyCode,v.value===38||v.value===40){const s=l.target.value,m=l.keyCode===38?Math.ceil(s/1e3)*1e3:Math.floor(s/1e3)*1e3;l.target.value=m}},A=(l,s)=>{l>=1e7?(t.amount=1e7,t.amount=Number(t.amount.toString().slice(0,8))):l<3e4&&(t.amount=3e4)};b(t,async()=>{t.amount&&(B.value=R(t.amount)+" ₽"),t.payment=Math.ceil(N(t.term,t.amount,_.value)),b(()=>t.amount,F),b(()=>t.amount,A),b(()=>t.firstName,l=>{t.firstName=l.replace(/\d+/g,"").toString()}),t.brand&&(h.value=await C(t.brand))});const D=i(!1),Q=async()=>{D.value=await K(t),setTimeout(()=>{D.value=!1},5e3),g.value=1,Object.keys(t).forEach(l=>{delete t[l]}),t.amount=3e5,t.term=60,t.payment=null},S=i(0),q=i(null),T={root:null,rootMargin:"0px",threshold:.5},U=(l,s)=>{l.forEach(m=>{m.isIntersecting&&(s.unobserve(m.target),P(S.value,5384916427,2500))})},j=new IntersectionObserver(U,T),P=(l,s,m)=>{let f=null;const I=O=>{f||(f=O);const E=Math.min((O-f)/m,1),W=Math.floor(E*(s-l)+l);S.value=W,E<1&&window.requestAnimationFrame(I)};window.requestAnimationFrame(I)};G(async()=>{j.observe(q.value),a.value=await C()});const z={formData:t,toFourDigits:e,step:g,percent:_,brands:a,models:h,mask:B,keyCode:v,loanPayment:N,suffix:J,handleKeydown:F,handleAmountChange:A,sended:D,send:Q,count:S,block:q,options:T,callback:U,observer:j,animateValue:P,ref:i,reactive:L,watch:b,computed:V,onMounted:G,get sendToApi(){return K},get getFromApi(){return C},get delimiter(){return R},Input:Y,Range:Z,Select:be,Button:le,Success:se};return Object.defineProperty(z,"__isScriptSetup",{enumerable:!1,value:!0}),z}},ve={class:"indent pb-13"},ke={class:"px-3 md:px-9 lg:px-[52px] xl:px-20 sm:container mx-auto"},we={ref:"block",class:"w-max mx-auto grid gap-4 md:gap-8"},Ve=n("p",{class:"heading text-center"},[u("Выдали клиентам "),n("br"),u(" в феврале")],-1),De={class:"tracking-t-3 text-center font-bold text-3.5xl text-buckthorn 2xs:text-t-4xl lg:text-[50px] lg:leading-[90px]"},Se=n("span",{class:"text-black/10"},"₽",-1),Ie={class:"grid gap-2 max-w-[288px] mx-auto md:gap-4 text-center"},Ce=n("span",{class:"text-t-lg text-mine-shaft/50"},"Тоже нужны деньги? Пишите!",-1),Me=["onSubmit"],Be={class:"text-mine-shaft grid gap-3 text-center"},Ne=n("span",{class:"font-bold text-2xl 2xs:text-3xl md:text-t-3xl md:font-extrabold md:tracking-t-3 lg:text-t-4xl"},"Заполните заявку на получение денег",-1),Fe={class:"opacity-30"},Ae={key:0,class:"grid md:grid-cols-2 gap-2 md:gap-4"},qe={key:1,class:"grid md:grid-cols-2 gap-2 md:gap-4"},Te={class:"grid gap-2"},Ue=n("ul",{class:"flex font-medium justify-between px-4"},[n("li",{class:"text-mine-shaft/40 text-xs"},"30 000"),n("li",{class:"text-mine-shaft/40 text-xs"},"10 000 000")],-1),je={class:"grid"},Pe=n("ul",{class:"flex font-medium justify-between mt-2 px-4"},[n("li",{class:"text-mine-shaft/40 text-xs"},"6 мес"),n("li",{class:"text-mine-shaft/40 text-xs"},"5 лет")],-1),ze={key:2,class:"grid md:grid-cols-2 gap-2 md:gap-4"},Oe=n("span",{class:"text-mine-shaft/40 text-sm font-medium text-center"},"Нажимая на кнопку «Далее», я соглашаюсь на обработку персональных данных и согласен с политикой конфиденциальности и лицензией",-1);function Ee(x,o,t,e,g,_){return d(),c("section",ve,[n("div",ke,[n("div",we,[Ve,n("span",De,[u(y(e.delimiter(e.count)),1),Se]),n("div",Ie,[Ce,r(e.Button,{href:"#form"},{default:p(()=>[u(" Оставить заявку ")]),_:1})])],512),r(M,{"enter-active-class":"animate-opacity-enter-active","leave-active-class":"animate-opacity-leave-active",mode:"out-in"},{default:p(()=>[e.sended?(d(),ne(e.Success,{key:1,class:"max-w-[440px] mt-[52px]"})):(d(),c("form",{key:0,id:"form",class:"bg-white scroll-mt-[140px] relative max-w-xl lg:max-w-none mx-auto py-6 grid gap-3 px-3 md:p-6 rounded-4xl mt-[52px]",onSubmit:X(e.send,["prevent"])},[n("div",Be,[Ne,n("span",Fe,"Шаг "+y(e.step)+"/3",1)]),r(M,{"enter-active-class":"animate-opacity-enter-active","leave-active-class":"animate-opacity-leave-active",mode:"out-in"},{default:p(()=>[e.step===1?(d(),c("fieldset",Ae,[r(e.Input,{modelValue:e.formData.firstName,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formData.firstName=a),placeholder:"Имя",required:""},null,8,["modelValue"]),r(e.Input,{modelValue:e.formData.phone,"onUpdate:modelValue":o[1]||(o[1]=a=>e.formData.phone=a),type:"tel",placeholder:"Номер телефона",required:""},null,8,["modelValue"]),r(e.Button,{class:"sm:col-start-2",disabled:!e.formData.phone||!e.formData.firstName,onClick:o[2]||(o[2]=a=>e.step=2)},{default:p(()=>[u("Далее")]),_:1},8,["disabled"])])):e.step===2?(d(),c("fieldset",qe,[n("fieldset",Te,[r(e.Input,{placeholder:"Сумма займа",type:"number",modelValue:e.formData.amount,"onUpdate:modelValue":o[3]||(o[3]=a=>e.formData.amount=a),mask:e.mask,onKeydown:e.handleKeydown,value:6,max:8},null,8,["modelValue","mask"]),Ue]),n("fieldset",je,[r(e.Range,{name:"term",title:"Срок займа",placeholder:e.suffix,modelValue:e.formData.term,"onUpdate:modelValue":o[4]||(o[4]=a=>e.formData.term=a),min:6,max:60,step:6},null,8,["placeholder","modelValue"]),Pe]),r(e.Button,{onClick:o[5]||(o[5]=a=>e.step=1),light:""},{default:p(()=>[u("Назад")]),_:1}),r(e.Button,{disabled:!e.formData.amount||!e.formData.term,onClick:o[6]||(o[6]=a=>e.step=3)},{default:p(()=>[u("Далее")]),_:1},8,["disabled"])])):e.step===3?(d(),c("fieldset",ze,[r(e.Select,{placeholder:"Веберите марку",class:"relative z-10",options:e.brands,modelValue:e.formData.brand,"onUpdate:modelValue":o[7]||(o[7]=a=>e.formData.brand=a)},null,8,["options","modelValue"]),r(e.Input,{type:"number",onInput:o[8]||(o[8]=a=>e.toFourDigits()),placeholder:"Год выпуска",modelValue:e.formData.year,"onUpdate:modelValue":o[9]||(o[9]=a=>e.formData.year=a)},null,8,["modelValue"]),r(e.Select,{disabled:!e.formData.brand,placeholder:"Веберите модель",options:e.models,modelValue:e.formData.model,"onUpdate:modelValue":o[10]||(o[10]=a=>e.formData.model=a)},null,8,["disabled","options","modelValue"]),r(e.Button,{class:"md:row-start-3",onClick:o[11]||(o[11]=a=>e.step=2),light:""},{default:p(()=>[u("Назад")]),_:1}),r(e.Button,{type:"submit",disabled:!e.formData.brand||!e.formData.year||!e.formData.model,class:"md:row-start-3 md:col-start-2"},{default:p(()=>[u("Оставить заявку")]),_:1},8,["disabled"])])):w("",!0)]),_:1}),Oe],40,Me))]),_:1})])])}const Xe=H(ye,[["render",Ee]]);export{Xe as default};
